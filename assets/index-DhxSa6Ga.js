import{r as o,a as Oe,R as he,u as ue,L as Ee,O as ze,b as pe,B as Ae,d as De,e as R,N as te}from"./vendor-CzrdEGSt.js";import{l as E,a as P}from"./utils-BjoElU2v.js";import{Q as $,W as Re}from"./scanner-Bsr_Gv_B.js";import{E as Ue}from"./excel-CfbhJPYn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const x of l.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();var fe={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=o,Fe=Symbol.for("react.element"),_e=Symbol.for("react.fragment"),qe=Object.prototype.hasOwnProperty,He=Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,We={key:!0,ref:!0,__self:!0,__source:!0};function je(s,t,r){var a,n={},l=null,x=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(x=t.ref);for(a in t)qe.call(t,a)&&!We.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Fe,type:s,key:l,ref:x,props:n,_owner:He.current}}J.Fragment=_e;J.jsx=je;J.jsxs=je;fe.exports=J;var e=fe.exports,be,ie=Oe;be=ie.createRoot,ie.hydrateRoot;const ge=o.createContext(void 0),_=()=>{const s=o.useContext(ge);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Ve=({children:s})=>{const[t,r]=o.useState(null),a=h=>{r(h),localStorage.setItem("user",JSON.stringify(h))},n=()=>{r(null),localStorage.removeItem("user")},l=(t==null?void 0:t.role)==="stock-manager",x={currentUser:t,login:a,logout:n,isAuthenticated:!!t,isStockManager:l};return e.jsx(ge.Provider,{value:x,children:s})},ye="pendingOperations",ve=E.createInstance({name:"offlineSync",storeName:"pendingOperations"}),V=async s=>{const t=await Ne(),r={...s,id:crypto.randomUUID(),timestamp:Date.now(),retryCount:0};await ve.setItem(ye,[...t,r])},Ne=async()=>await ve.getItem(ye)||[],$e=async()=>(await Ne()).length>0,ne=()=>!navigator.onLine,Qe=s=>{const t=()=>s(!1),r=()=>s(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),s(ne()),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},we=o.createContext(void 0),K=()=>{const s=o.useContext(we);if(!s)throw new Error("useInventory must be used within an InventoryProvider");return s},Ye=({children:s})=>{const[t,r]=o.useState([]),[a,n]=o.useState([]),[l,x]=o.useState([]),[h,g]=o.useState(ne());o.useEffect(()=>{(async()=>{try{const i=await E.getItem("products");i&&r(i);const b=await E.getItem("boxes");b&&n(b);const L=await E.getItem("stockHistory");L&&x(L)}catch(i){console.error("Error loading data:",i)}})()},[]),o.useEffect(()=>{const d=()=>{g(!navigator.onLine)};return window.addEventListener("online",d),window.addEventListener("offline",d),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",d)}},[]),o.useEffect(()=>{t.length&&(E.setItem("products",t),h&&V({type:"update",data:{products:t}}))},[t,h]),o.useEffect(()=>{a.length&&(E.setItem("boxes",a),h&&V({type:"update",data:{boxes:a}}))},[a,h]),o.useEffect(()=>{l.length&&(E.setItem("stockHistory",l),h&&V({type:"update",data:{stockHistory:l}}))},[l,h]);const z={products:t,boxes:a,stockHistory:l,uploadInventory:async(d,i)=>{if(!Array.isArray(d)||d.length===0)throw new Error("Invalid products data");const b={added:0,removed:0,updated:0},L=new Map(t.map(N=>[N.barcode,N])),I=new Map(d.map(N=>[N.barcode,N])),B=[];if(I.forEach((N,m)=>{if(L.has(m)){const v=L.get(m);B.push({...N,location:N.location||v.location,boxNumber:N.boxNumber||v.boxNumber}),b.updated++}else B.push(N),b.added++}),b.removed=t.length-b.updated,r(B),i&&i.length>0){const N=new Set(a.map(v=>v.id)),m=[...a];i.forEach(v=>{N.has(v.id)||m.push(v)}),n(m)}const M={date:new Date().toISOString(),fileName:`SOH_${new Date().toLocaleDateString().replace(/\//g,"-")}.xlsx`,changes:b};x([M,...l]),h&&await V({type:"upload",data:{products:B,boxes:i,history:M}})},getProductByBarcode:d=>t.find(i=>i.barcode===d),getLowStockProducts:(d=5)=>t.filter(i=>i.quantity<d),assignProductToBox:async(d,i)=>{const b=t.findIndex(v=>v.barcode===d),L=a.findIndex(v=>v.id===i);if(b===-1||L===-1)throw new Error("Product or box not found");const I=[...t];I[b]={...I[b],location:"Box",boxNumber:i};const B=[...a],M=B[L],N=M.products||[],m=N.findIndex(v=>v.barcode===d);m>=0?N[m]={...I[b]}:N.push({...I[b]}),B[L]={...M,products:N},r(I),n(B),await E.setItem("products",I),await E.setItem("boxes",B)},createBox:async d=>{const i={...d,products:[]},b=[...a,i];n(b),await E.setItem("boxes",b)},getBoxById:d=>a.find(i=>i.id===d),removeProductFromBox:async d=>{const i=t.findIndex(M=>M.barcode===d);if(i===-1)throw new Error("Product not found");const b=t[i];if(!b.boxNumber)return;const L=a.findIndex(M=>M.id===b.boxNumber),I=[...t];I[i]={...I[i],location:"Main Store",boxNumber:void 0};let B=[...a];if(L!==-1){const M=B[L],N=M.products.filter(m=>m.barcode!==d);B[L]={...M,products:N}}r(I),n(B),await E.setItem("products",I),await E.setItem("boxes",B)},searchProducts:d=>{if(!d)return[];const i=d.toLowerCase();return t.filter(b=>b.barcode.toLowerCase().includes(i)||b.size.toLowerCase().includes(i)||b.color.toLowerCase().includes(i)||b.department.toLowerCase().includes(i)||b.styleNumber.toLowerCase().includes(i))},isOffline:h};return e.jsx(we.Provider,{value:z,children:s})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ze={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),p=(s,t)=>{const r=o.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:x,className:h="",children:g,...u},c)=>o.createElement("svg",{ref:c,...Ze,width:n,height:n,stroke:a,strokeWidth:x?Number(l)*24/Number(n):l,className:["lucide",`lucide-${Xe(s)}`,h].join(" "),...u},[...t.map(([f,C])=>o.createElement(f,C)),...Array.isArray(g)?g:[g]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=p("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=p("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=p("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=p("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=p("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=p("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=p("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=p("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=p("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=p("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=p("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=p("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=p("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=p("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=p("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=p("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=p("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=p("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=p("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=p("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=p("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=p("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=p("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=p("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=p("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=p("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=p("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=p("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=p("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=p("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=p("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=p("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),H=({to:s,icon:t,label:r,collapsed:a})=>{const l=ue().pathname===s;return e.jsxs(Ee,{to:s,className:P("flex items-center py-2 px-3 mb-1 rounded-md text-sm font-medium transition-colors",l?"bg-indigo-100 text-indigo-900":"text-slate-600 hover:text-slate-900 hover:bg-slate-100",a?"justify-center":""),children:[e.jsx("span",{className:P(a?"mx-auto":"mr-3"),children:t}),!a&&e.jsx("span",{children:r})]})},bs=({open:s,setOpen:t})=>{const[r,a]=he.useState(!1),{currentUser:n,logout:l,isStockManager:x}=_(),h=()=>{window.innerWidth<768&&t(!1)},g=e.jsxs("div",{className:P("h-full bg-white border-r border-slate-200 flex flex-col transition-all duration-300 ease-in-out",r?"w-16":"w-64"),children:[e.jsxs("div",{className:"p-4 flex items-center border-b border-slate-200",children:[e.jsx("div",{className:P("flex-1",r?"hidden":""),children:e.jsx("h1",{className:"text-xl font-bold text-indigo-700",children:"StockTrack"})}),e.jsx("button",{onClick:()=>a(!r),className:"p-1 rounded-md hover:bg-slate-100 text-slate-500 md:block hidden",children:r?e.jsx(es,{size:20}):e.jsx(Ge,{size:20})}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 rounded-md hover:bg-slate-100 text-slate-500 md:hidden block ml-2",children:e.jsx(re,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:e.jsx("nav",{className:"space-y-1",children:e.jsxs("div",{onClick:h,children:[e.jsx(H,{to:"/",icon:e.jsx(Se,{size:20}),label:"Dashboard",collapsed:r}),e.jsx(H,{to:"/inventory",icon:e.jsx(Z,{size:20}),label:"Inventory Lookup",collapsed:r}),e.jsx(H,{to:"/boxes",icon:e.jsx(le,{size:20}),label:"Boxes",collapsed:r}),x&&e.jsxs(e.Fragment,{children:[e.jsx(H,{to:"/upload",icon:e.jsx(ae,{size:20}),label:"SOH Upload",collapsed:r}),e.jsx(H,{to:"/users",icon:e.jsx(hs,{size:20}),label:"User Management",collapsed:r})]})]})})}),e.jsxs("div",{className:"p-3 border-t border-slate-200",children:[!r&&n&&e.jsxs("div",{className:"mb-3 px-3 py-2",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:n.name}),e.jsx("div",{className:"text-xs text-slate-500",children:n.role==="stock-manager"?"Stock Manager":"Sales Staff"})]}),e.jsxs("button",{onClick:l,className:P("flex items-center py-2 px-3 w-full rounded-md text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",r?"justify-center":""),children:[e.jsx("span",{className:P(r?"mx-auto":"mr-3"),children:e.jsx(ns,{size:20})}),!r&&e.jsx("span",{children:"Logout"})]})]})]});return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-30 md:hidden",onClick:()=>t(!1)}),e.jsx("aside",{className:P("fixed z-50 top-0 left-0 h-full md:static md:translate-x-0 transition-transform duration-300",s?"translate-x-0":"-translate-x-full","md:translate-x-0","md:block","w-64","md:h-screen"),style:{width:r?64:256},"aria-label":"Sidebar",children:g})]})},gs=()=>{const[s,t]=o.useState(ne()),[r,a]=o.useState(!1);return o.useEffect(()=>{const n=Qe(h=>{t(h)}),l=async()=>{const h=await $e();a(h)},x=setInterval(l,5e3);return l(),()=>{n(),clearInterval(x)}},[]),!s&&!r?null:e.jsxs("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:[s&&e.jsxs("div",{className:"bg-amber-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5"}),e.jsx("span",{children:"You are offline"})]}),r&&e.jsxs("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsx("span",{children:"Pending changes will sync when online"})]}),!s&&r&&e.jsxs("div",{className:"bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),e.jsx("span",{children:"Syncing changes..."})]})]})},ys=()=>{const[s,t]=o.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-slate-50",children:[e.jsx(bs,{open:s,setOpen:t}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"md:hidden flex items-center h-14 px-4 bg-white border-b border-slate-200",children:[e.jsx("button",{className:"mr-3 p-2 rounded-md hover:bg-slate-100",onClick:()=>t(!0),"aria-label":"Open menu",children:e.jsx(os,{size:24})}),e.jsx("span",{className:"text-lg font-bold text-indigo-700",children:"StockTrack"})]}),e.jsx("main",{className:"flex-1 overflow-auto p-2 md:p-6",children:e.jsx(ze,{})}),e.jsx(gs,{})]})]})},k=({children:s,className:t})=>e.jsx("div",{className:P("bg-white rounded-lg shadow-md overflow-hidden",t),children:s}),U=({children:s,className:t})=>e.jsx("div",{className:P("p-4 border-b border-slate-200",t),children:s}),T=({children:s,className:t})=>e.jsx("h3",{className:P("text-lg font-semibold text-slate-900",t),children:s}),vs=({children:s,className:t})=>e.jsx("p",{className:P("text-sm text-slate-500",t),children:s}),S=({children:s,className:t})=>e.jsx("div",{className:P("p-4",t),children:s}),Pe=({children:s,className:t})=>e.jsx("div",{className:P("p-4 border-t border-slate-200",t),children:s}),y=he.forwardRef(({children:s,className:t,variant:r="primary",size:a="md",isLoading:n=!1,leftIcon:l,rightIcon:x,disabled:h,as:g="button",...u},c)=>{const f="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none cursor-pointer",C={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus-visible:ring-indigo-500",secondary:"bg-emerald-600 text-white hover:bg-emerald-700 focus-visible:ring-emerald-500",outline:"border border-slate-300 bg-transparent hover:bg-slate-100 focus-visible:ring-slate-500",ghost:"bg-transparent hover:bg-slate-100 focus-visible:ring-slate-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500"},j={sm:"h-8 px-3 text-sm",md:"h-10 px-4",lg:"h-12 px-6 text-lg"},w=P(f,C[r],j[a],n&&"opacity-70 pointer-events-none",t);return e.jsxs(g,{className:w,disabled:h||n,ref:c,...u,children:[n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!n&&l&&e.jsx("span",{className:"mr-2",children:l}),s,!n&&x&&e.jsx("span",{className:"ml-2",children:x})]})});y.displayName="Button";const de=({children:s,variant:t="default",className:r})=>{const a={default:"bg-slate-100 text-slate-800",success:"bg-emerald-100 text-emerald-800",warning:"bg-amber-100 text-amber-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};return e.jsx("span",{className:P("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",a[t],r),children:s})},X=({product:s,onAssignToBox:t})=>{const{isStockManager:r}=_(),a=s.quantity<5;return e.jsxs(k,{className:"w-full transition-shadow hover:shadow-lg",children:[e.jsx(U,{className:`${a?"bg-amber-50":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-indigo-600"}),e.jsxs("span",{children:["Product #",s.styleNumber]})]}),a&&e.jsxs(de,{variant:"warning",className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx("span",{children:"Low Stock"})]})]})}),e.jsxs(S,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Barcode"}),e.jsx("p",{className:"text-lg font-mono",children:s.barcode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Department"}),e.jsx("p",{className:"text-lg",children:s.department})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Color"}),e.jsx("p",{className:"text-lg",children:s.color})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Size"}),e.jsx("p",{className:"text-lg",children:s.size})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Quantity"}),e.jsxs("p",{className:`text-lg font-semibold ${a?"text-amber-600":""}`,children:[s.quantity," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Retail Price"}),e.jsxs("p",{className:"text-lg",children:["$",s.retailPrice.toFixed(2)]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("span",{children:s.location||"Main Store"}),s.boxNumber&&e.jsxs(de,{variant:"info",className:"ml-2",children:["Box #",s.boxNumber]})]})})]}),r&&t&&e.jsx(Pe,{className:"bg-slate-50",children:e.jsx(y,{variant:"outline",size:"sm",className:"w-full",onClick:()=>t(s),children:"Assign to Box"})})]})},Ns=()=>{const s=pe(),{products:t,boxes:r,getLowStockProducts:a}=K(),[n,l]=o.useState([]);o.useEffect(()=>{l(a(5))},[t,a]);const x=t.reduce((h,g)=>h+g.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),e.jsx(y,{onClick:()=>s("/inventory"),rightIcon:e.jsx(Je,{size:16}),children:"Inventory Lookup"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 mb-6",children:[e.jsx(k,{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-md",children:e.jsxs(S,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Total Inventory"}),e.jsx(Y,{className:"h-7 w-7 sm:h-8 sm:w-8 opacity-80"})]}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:x.toLocaleString()}),e.jsx("p",{className:"text-indigo-100 mt-1 text-sm sm:text-base",children:"items in stock"})]})}),e.jsx(k,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-md",children:e.jsxs(S,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Product Variants"}),e.jsx(ds,{className:"h-7 w-7 sm:h-8 sm:w-8 opacity-80"})]}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:t.length.toLocaleString()}),e.jsx("p",{className:"text-emerald-100 mt-1 text-sm sm:text-base",children:"unique products"})]})}),e.jsx(k,{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white shadow-md",children:e.jsxs(S,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Storage Boxes"}),e.jsx(Q,{className:"h-7 w-7 sm:h-8 sm:w-8 opacity-80"})]}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:r.length.toLocaleString()}),e.jsx("p",{className:"text-amber-100 mt-1 text-sm sm:text-base",children:"boxes in use"})]})})]}),n.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(G,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Low Stock Items"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.slice(0,3).map(h=>e.jsx(X,{product:h},h.barcode))}),n.length>3&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(y,{variant:"outline",onClick:()=>s("/inventory",{state:{filter:"low-stock"}}),children:["View All ",n.length," Low Stock Items"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ce,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Quick Actions"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(k,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(S,{className:"p-6 flex flex-col items-center text-center",children:[e.jsx(ce,{className:"h-10 w-10 text-indigo-600 mb-3"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Inventory Lookup"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Scan or search for items in your inventory"}),e.jsx(y,{variant:"outline",className:"w-full",onClick:()=>s("/inventory"),children:"Search Inventory"})]})}),e.jsx(k,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(S,{className:"p-6 flex flex-col items-center text-center",children:[e.jsx(Q,{className:"h-10 w-10 text-indigo-600 mb-3"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Box Management"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"View and manage storage boxes"}),e.jsx(y,{variant:"outline",className:"w-full",onClick:()=>s("/boxes"),children:"View Boxes"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Y,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Recent Activity"})]}),e.jsx(k,{className:"bg-white shadow-sm",children:e.jsx(S,{className:"p-4",children:t.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-slate-500 mb-3",children:"No inventory data available"}),e.jsx(y,{variant:"primary",onClick:()=>s("/upload"),children:"Upload Inventory"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:[t.length," products in inventory"]}),e.jsx("div",{className:"h-32 flex items-center justify-center border border-slate-200 rounded-md",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"Activity chart will appear here"})})]})})})]})]})]})},F=o.forwardRef(({className:s,label:t,error:r,leftIcon:a,rightIcon:n,...l},x)=>e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{htmlFor:l.id,className:"block text-sm font-medium text-slate-700 mb-1",children:t}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[a&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a}),e.jsx("input",{ref:x,className:P("block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",a&&"pl-10",n&&"pr-10",r&&"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500",s),...l}),n&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:n})]}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",id:`${l.id}-error`,children:r})]}));F.displayName="Input";const ws=(s,t)=>{$.init({inputStream:{name:"Live",type:"LiveStream",target:s,constraints:{facingMode:"environment",width:{min:640},height:{min:480},aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,frequency:10,decoder:{readers:["ean_reader","ean_8_reader","code_128_reader","code_39_reader","upc_reader"]},locate:!0},r=>{if(r){t.onError&&t.onError(r);return}$.start(),$.onDetected(a=>{a&&a.codeResult&&t.onDetected(a.codeResult.code)})})},xe=()=>{$.stop()},ks=({onDetected:s,onClose:t})=>{const r=o.useRef(null),[a,n]=o.useState(!1),[l,x]=o.useState(!1),[h,g]=o.useState(""),u=o.useRef(null);o.useEffect(()=>{if(r.current)try{ws(r.current,{onDetected:f=>{xe(),s(f)},onError:f=>{x(!0),g("Could not initialize camera. Please check permissions."),console.error("Barcode scanner error:",f)}})}catch(f){x(!0),g("Failed to initialize barcode scanner."),console.error("Error initializing scanner:",f)}return()=>{xe()}},[s]);const c=async()=>{var f,C;try{if(u.current&&u.current.video){const j=(f=u.current.video.srcObject)==null?void 0:f.getVideoTracks()[0];if(j&&"imageCaptureOff"in j&&(C=(await new window.ImageCapture(j).getPhotoCapabilities()).fillLightMode)!=null&&C.includes("flash")){const O=!a;await j.applyConstraints({advanced:[{torch:O}]}),n(O)}}}catch(j){console.error("Error toggling torch:",j)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden w-full max-w-md",children:[e.jsxs("div",{className:"p-4 bg-indigo-600 text-white flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ce,{className:"mr-2"})," Scan Barcode"]}),e.jsx("button",{onClick:t,className:"text-white hover:text-indigo-100",children:e.jsx(re,{size:24})})]}),l?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:h}),e.jsx(y,{variant:"outline",onClick:t,children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:r,className:"bg-black relative overflow-hidden",style:{height:"300px"},children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[e.jsx("div",{className:"h-1/4 border-t-2 border-l-2 border-indigo-500 border-opacity-70 w-1/4 absolute top-6 left-6"}),e.jsx("div",{className:"h-1/4 border-t-2 border-r-2 border-indigo-500 border-opacity-70 w-1/4 absolute top-6 right-6"}),e.jsx("div",{className:"h-1/4 border-b-2 border-l-2 border-indigo-500 border-opacity-70 w-1/4 absolute bottom-6 left-6"}),e.jsx("div",{className:"h-1/4 border-b-2 border-r-2 border-indigo-500 border-opacity-70 w-1/4 absolute bottom-6 right-6"})]}),e.jsx(Re,{ref:u,audio:!1,videoConstraints:{facingMode:"environment"},style:{position:"absolute",width:"100%",height:"100%",objectFit:"cover"}})]}),e.jsxs("div",{className:"p-4 flex space-x-2",children:[e.jsx(y,{variant:"outline",className:"flex-1",leftIcon:a?e.jsx(fs,{size:16}):e.jsx(js,{size:16}),onClick:c,children:a?"Turn Off Flash":"Turn On Flash"}),e.jsx(y,{variant:"danger",className:"flex-1",leftIcon:e.jsx(re,{size:16}),onClick:t,children:"Cancel"})]})]})]})})},Ss=()=>{const s=ue(),{products:t,searchProducts:r,getProductByBarcode:a,getLowStockProducts:n}=K(),[l,x]=o.useState(""),[h,g]=o.useState(null),[u,c]=o.useState([]),[f,C]=o.useState(!1),[j,w]=o.useState("all");o.useEffect(()=>{var d;((d=s.state)==null?void 0:d.filter)==="low-stock"&&w("low-stock")},[s.state]),o.useEffect(()=>{c(j==="low-stock"?n(5):l?r(l):[])},[j,l,n,r]);const D=d=>{d.preventDefault(),l&&c(r(l))},O=d=>{C(!1),x(d);const i=a(d);i?(g(i),c([])):(c([]),g(null))},z=d=>{g(d),c([]),x(d.barcode)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Inventory Lookup"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("form",{onSubmit:D,children:e.jsx(F,{placeholder:"Search by barcode, style number, color, etc.",value:l,onChange:d=>x(d.target.value),leftIcon:e.jsx(Z,{className:"h-5 w-5 text-slate-400"})})})}),e.jsx(y,{variant:"primary",onClick:()=>C(!0),leftIcon:e.jsx(Ce,{className:"h-5 w-5"}),children:"Scan"})]}),e.jsxs("div",{className:"flex border-b border-slate-200 mb-4",children:[e.jsxs("button",{className:`px-4 py-2 font-medium text-sm ${j==="all"?"border-b-2 border-indigo-600 text-indigo-600":"text-slate-600 hover:text-slate-900"}`,onClick:()=>w("all"),children:[e.jsx(Se,{className:"h-4 w-4 inline mr-1"}),"All Items"]}),e.jsxs("button",{className:`px-4 py-2 font-medium text-sm ${j==="low-stock"?"border-b-2 border-amber-500 text-amber-500":"text-slate-600 hover:text-slate-900"}`,onClick:()=>w("low-stock"),children:[e.jsx(G,{className:"h-4 w-4 inline mr-1"}),"Low Stock"]})]})]}),h?e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Product Details"}),e.jsx(X,{product:h,onAssignToBox:()=>{}}),e.jsx("div",{className:"mt-4",children:e.jsx(y,{variant:"outline",onClick:()=>{g(null),x("")},children:"Back to Search"})})]}):u.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:j==="low-stock"?"Low Stock Items":"Search Results"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(d=>e.jsx("div",{onClick:()=>z(d),children:e.jsx(X,{product:d})},d.barcode))})]}):t.length===0?e.jsx(k,{children:e.jsxs(S,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"No Inventory Data"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Upload your inventory data to get started."}),e.jsx(y,{onClick:()=>{window.location.href="/upload"},children:"Upload Inventory"})]})}):e.jsx(k,{children:e.jsxs(S,{className:"p-8 text-center",children:[e.jsx(Z,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:j==="low-stock"?"No Low Stock Items Found":"Search for Inventory Items"}),e.jsx("p",{className:"text-slate-500",children:j==="low-stock"?"All items have adequate stock levels.":"Enter a barcode, style number, or other product information in the search box above."})]})}),f&&e.jsx(ks,{onDetected:O,onClose:()=>C(!1)})]})},me=({box:s,onViewDetails:t})=>{var r;return s?e.jsxs(k,{className:"transition-shadow hover:shadow-lg",children:[e.jsxs(U,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(T,{className:"flex items-center text-lg",children:[e.jsx(le,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsxs("span",{children:["Box #",s.id]})]}),e.jsx("span",{className:"text-sm text-slate-500",children:s.name})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Q,{className:"h-4 w-4 text-slate-500 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:[((r=s.products)==null?void 0:r.length)||0," items"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xs,{className:"h-4 w-4 text-slate-500 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Location: ",s.location]})]})]}),s.products&&s.products.length>0&&e.jsxs("div",{className:"mt-3 border-t border-slate-200 pt-3",children:[e.jsx("h4",{className:"text-xs uppercase font-semibold text-slate-500 mb-2",children:"Top items"}),e.jsxs("ul",{className:"space-y-1",children:[s.products.slice(0,3).map(a=>e.jsxs("li",{className:"text-sm text-slate-700 truncate",children:[a.department," - ",a.color," ",a.size]},a.barcode)),s.products.length>3&&e.jsxs("li",{className:"text-xs text-slate-500",children:["+ ",s.products.length-3," more items"]})]})]})]}),e.jsx(Pe,{className:"bg-slate-50",children:e.jsx(y,{variant:"outline",className:"w-full",onClick:()=>t(s.id),children:"View Details"})})]}):null},Cs=()=>{var d;const{boxes:s,createBox:t,getBoxById:r}=K(),{isStockManager:a}=_(),[n,l]=o.useState(""),[x,h]=o.useState(null),[g,u]=o.useState(!1),[c,f]=o.useState(""),[C,j]=o.useState("Back Store"),w=x?r(x):null,O=(n&&s?s.filter(i=>i&&(i.id.toLowerCase().includes(n.toLowerCase())||i.name.toLowerCase().includes(n.toLowerCase())||i.location.toLowerCase().includes(n.toLowerCase()))):s||[]).filter(i=>i!=null),z=async()=>{c&&(await t({id:`BOX${Math.floor(Math.random()*1e4).toString().padStart(4,"0")}`,name:c,location:C}),f(""),j("Back Store"),u(!1))};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Box Management"}),a&&e.jsx(y,{onClick:()=>u(!0),leftIcon:e.jsx(is,{size:16}),children:"Create New Box"})]}),e.jsx("div",{className:"mb-6",children:e.jsx(F,{placeholder:"Search boxes by ID, name, or location",value:n,onChange:i=>l(i.target.value),leftIcon:e.jsx(Z,{className:"h-5 w-5 text-slate-400"})})}),w?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(y,{variant:"outline",onClick:()=>h(null),children:"Back to All Boxes"})}),e.jsxs(k,{className:"mb-6",children:[e.jsx(U,{children:e.jsxs(T,{className:"flex items-center",children:[e.jsx(me,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsxs("span",{children:["Box Details: ",w.name," (#",w.id,")"]})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-slate-500",children:["Location: ",w.location]}),e.jsxs("p",{className:"text-slate-500",children:["Total Items: ",((d=w.products)==null?void 0:d.length)||0]})]}),!w.products||w.products.length===0?e.jsxs("div",{className:"p-4 bg-slate-50 rounded-md text-center",children:[e.jsx(Q,{className:"h-10 w-10 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500",children:"This box is empty."})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Box Contents"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.products.map(i=>e.jsx(X,{product:i},i.barcode))})]})]})]})]}):e.jsx("div",{children:O.length===0?e.jsx(k,{children:e.jsxs(S,{className:"p-8 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"No Boxes Found"}),n?e.jsx("p",{className:"text-slate-500",children:"No boxes match your search criteria. Try a different search term."}):e.jsx("p",{className:"text-slate-500",children:"You haven't created any boxes yet. Create one to start organizing your inventory."}),a&&!n&&e.jsx(y,{className:"mt-4",onClick:()=>u(!0),children:"Create Your First Box"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(i=>e.jsx(me,{box:i,onViewDetails:b=>h(b)},i.id))})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(k,{className:"w-full max-w-md",children:[e.jsx(U,{children:e.jsx(T,{children:"Create New Box"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Box Name"}),e.jsx(F,{placeholder:"e.g., Winter Collection",value:c,onChange:i=>f(i.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),e.jsxs("select",{className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:C,onChange:i=>j(i.target.value),children:[e.jsx("option",{value:"Main Store",children:"Main Store"}),e.jsx("option",{value:"Back Store",children:"Back Store"}),e.jsx("option",{value:"Warehouse",children:"Warehouse"}),e.jsx("option",{value:"Storage Room",children:"Storage Room"})]})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-3",children:[e.jsx(y,{variant:"primary",onClick:z,disabled:!c,children:"Create Box"}),e.jsx(y,{variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]})]})})]})},Bs=async()=>{const s=new Ue.Workbook,t=s.addWorksheet("Products");t.columns=[{header:"Barcode",key:"barcode"},{header:"Quantity",key:"quantity"},{header:"Size",key:"size"},{header:"Color",key:"color"},{header:"Age",key:"age"},{header:"StyleNumber",key:"styleNumber"},{header:"Department",key:"department"},{header:"RetailPrice",key:"retailPrice"},{header:"Location",key:"location"},{header:"BoxNumber",key:"boxNumber"}],t.addRows([{barcode:"123456789012",quantity:10,size:"M",color:"Blue",age:"Adult",styleNumber:"STY001",department:"Menswear",retailPrice:29.99,location:"Box",boxNumber:"BOX001"},{barcode:"223456789012",quantity:5,size:"S",color:"Red",age:"Adult",styleNumber:"STY002",department:"Womenswear",retailPrice:39.99,location:"Box",boxNumber:"BOX001"},{barcode:"323456789012",quantity:3,size:"L",color:"Black",age:"Adult",styleNumber:"STY003",department:"Accessories",retailPrice:19.99,location:"Main Store",boxNumber:""}]);const r=s.addWorksheet("Boxes");r.columns=[{header:"BoxNumber",key:"boxNumber"},{header:"BoxName",key:"boxName"},{header:"Location",key:"location"}],r.addRows([{boxNumber:"BOX001",boxName:"Winter Collection",location:"Back Store"},{boxNumber:"BOX002",boxName:"Summer Collection",location:"Warehouse"},{boxNumber:"BOX003",boxName:"Accessories",location:"Storage Room"}]);const a=await s.xlsx.writeBuffer(),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(n),x=document.createElement("a");x.href=l,x.download="inventory_template.xlsx",x.click(),window.URL.revokeObjectURL(l)},Ps=()=>{const{uploadInventory:s,stockHistory:t}=K(),[r,a]=o.useState(null),[n,l]=o.useState(!1),[x,h]=o.useState(!1),[g,u]=o.useState(null),[c,f]=o.useState([]),[C,j]=o.useState([]),[w,D]=o.useState(!1),[O,z]=o.useState(!1),d=()=>new Worker(new URL("/inventory-management/assets/excelParser.worker-DlWPYn5H.js",import.meta.url),{type:"module"}),i=async m=>{if(!m.name.endsWith(".xlsx")&&!m.name.endsWith(".xls")){u("Please select an Excel file (.xlsx or .xls)"),a(null);return}a(m),h(!1),u(null),f([]),j([]),z(!0);let v=null,A=null,q=!1;const W=()=>{v&&clearTimeout(v),A&&A.terminate(),z(!1)};try{const oe=await m.arrayBuffer();try{A=d()}catch{u("Failed to load Excel parser. Please refresh and try again."),z(!1),a(null),f([]),j([]);return}A.postMessage({fileBuffer:oe}),v=setTimeout(()=>{q||(W(),u("Parsing timed out. Please try a smaller file or check your browser."),a(null),f([]),j([]))},3e4),A.onmessage=ee=>{if(q)return;q=!0,W();const{products:Le,boxes:Ie,error:Me}=ee.data;Me?(u("Could not parse the Excel file. Please check the format."),a(null),f([]),j([])):(f(Le||[]),j(Ie||[]))},A.onerror=ee=>{q||(q=!0,W(),u("Could not parse the Excel file. Please check the format."),a(null),f([]),j([]))}}catch{W(),u("Could not parse the Excel file. Please check the format."),a(null),f([]),j([])}},b=o.useCallback(m=>{m.preventDefault(),D(!1);const v=m.dataTransfer.files[0];v&&i(v)},[]),L=o.useCallback(m=>{m.preventDefault(),D(!0)},[]),I=o.useCallback(m=>{m.preventDefault(),D(!1)},[]),B=m=>{var A;const v=(A=m.target.files)==null?void 0:A[0];v&&i(v)},M=async()=>{if(c.length){l(!0),u(null);try{await s(c,C),h(!0),a(null),f([]),j([]);const m=document.getElementById("file-upload");m&&(m.value="")}catch{u("Failed to update inventory. Please try again.")}finally{l(!1)}}},N=async()=>{try{await Bs()}catch{u("Failed to download template. Please try again.")}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"SOH Upload"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(k,{children:[e.jsx(U,{children:e.jsx(T,{children:"Upload Inventory File"})}),e.jsxs(S,{children:[x?e.jsxs("div",{className:"p-6 bg-emerald-50 rounded-md border border-emerald-100 flex items-start mb-6",children:[e.jsx(Ke,{className:"h-5 w-5 text-emerald-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-emerald-800 mb-1",children:"Upload Successful"}),e.jsx("p",{className:"text-emerald-600 text-sm",children:"Your inventory has been updated successfully."})]})]}):g?e.jsxs("div",{className:"p-6 bg-red-50 rounded-md border border-red-100 flex items-start mb-6",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Upload Failed"}),e.jsx("p",{className:"text-red-600 text-sm",children:g})]})]}):null,e.jsxs("div",{onDrop:b,onDragOver:L,onDragLeave:I,className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${w?"border-indigo-400 bg-indigo-50":r?"border-indigo-300 bg-indigo-50":"border-slate-300 hover:border-slate-400"}`,children:[e.jsx("input",{id:"file-upload",type:"file",accept:".xlsx,.xls",onChange:B,className:"hidden"}),r?e.jsxs("div",{children:[e.jsx(ts,{className:"h-12 w-12 text-indigo-500 mx-auto mb-2"}),e.jsx("p",{className:"text-indigo-700 font-medium mb-1",children:r.name}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:O?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(as,{className:"animate-spin"})," Processing file..."]}):c.length?`${c.length} products found`:"Processing file..."}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx(y,{variant:"primary",onClick:M,isLoading:n,disabled:!c.length||n||O,children:n?"Uploading...":"Update Inventory"}),e.jsx(y,{variant:"outline",onClick:()=>{a(null),f([]),j([]);const m=document.getElementById("file-upload");m&&(m.value="")},disabled:n||O,children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx(ae,{className:"h-12 w-12 text-slate-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:w?"Drop your file here":"Upload SOH Excel File"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Drag and drop your Excel file here, or click to browse"}),e.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 border border-slate-300 bg-transparent hover:bg-slate-100 focus-visible:ring-slate-500 h-10 px-4 cursor-pointer",children:[e.jsx(ae,{size:16,className:"mr-2"}),"Browse Files"]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Supported formats: .xlsx, .xls"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Need a template? Download our sample Excel format"}),e.jsx(y,{variant:"outline",size:"sm",leftIcon:e.jsx(ss,{size:16}),onClick:N,children:"Download Template"})]}),c.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-3",children:"Preview"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Barcode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Style #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Size/Color"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Price"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:c.slice(0,5).map(m=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-slate-500",children:m.barcode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:m.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:m.styleNumber}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:[m.size," / ",m.color]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:m.quantity}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:["$",m.retailPrice.toFixed(2)]})]},m.barcode))})]}),c.length>5&&e.jsxs("p",{className:"text-sm text-slate-500 mt-2 text-center",children:["Showing 5 of ",c.length," products"]})]})]})]})]})}),e.jsx("div",{children:e.jsxs(k,{children:[e.jsx(U,{children:e.jsx(T,{children:"Upload History"})}),e.jsx(S,{children:t.length===0?e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-slate-500",children:"No uploads yet"})}):e.jsx("div",{className:"space-y-4",children:t.map((m,v)=>e.jsx("div",{className:"p-3 border border-slate-200 rounded-md hover:bg-slate-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900",children:m.fileName}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(m.date).toLocaleString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-xs font-medium text-emerald-600",children:["+",m.changes.added]})," / ",e.jsxs("span",{className:"text-xs font-medium text-amber-600",children:["~",m.changes.updated]})," / ",e.jsxs("span",{className:"text-xs font-medium text-red-600",children:["-",m.changes.removed]})]})]})},v))})})]})})]})]})},Ls=[{id:"1",name:"John Smith",role:"stock-manager"},{id:"2",name:"Jane Doe",role:"sales-staff"},{id:"3",name:"Robert Johnson",role:"sales-staff"}],Is=()=>{const{currentUser:s}=_(),[t,r]=o.useState(Ls),[a,n]=o.useState(!1),[l,x]=o.useState(""),[h,g]=o.useState("sales-staff");if(!s||s.role!=="stock-manager")return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have permission to access this page."}),e.jsx(y,{variant:"primary",onClick:()=>window.location.href="/",children:"Back to Dashboard"})]});const u=()=>{if(!l)return;const c={id:`user-${Date.now()}`,name:l,role:h};r([...t,c]),x(""),g("sales-staff"),n(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"User Management"}),e.jsx(y,{onClick:()=>n(!0),leftIcon:e.jsx(ms,{size:16}),children:"Add User"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.map(c=>e.jsx(k,{className:"hover:shadow-md transition-shadow",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-semibold mr-3",children:c.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900",children:c.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(cs,{className:"h-3.5 w-3.5 text-slate-400 mr-1"}),e.jsx("span",{className:"text-xs text-slate-500",children:c.role==="stock-manager"?"Stock Manager":"Sales Staff"})]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.role==="stock-manager"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"}`,children:c.role==="stock-manager"?"Admin":"Staff"})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(y,{variant:"outline",size:"sm",className:"flex-1",children:"Edit"}),c.id!==(s==null?void 0:s.id)&&e.jsx(y,{variant:"danger",size:"sm",className:"flex-1",children:"Remove"})]})]})},c.id))}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(k,{className:"w-full max-w-md",children:[e.jsx(U,{children:e.jsxs(T,{className:"flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 text-indigo-600 mr-2"}),e.jsx("span",{children:"Add New User"})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),e.jsx(F,{placeholder:"John Smith",value:l,onChange:c=>x(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),e.jsxs("select",{className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:h,onChange:c=>g(c.target.value),children:[e.jsx("option",{value:"sales-staff",children:"Sales Staff"}),e.jsx("option",{value:"stock-manager",children:"Stock Manager (Admin)"})]})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-3",children:[e.jsx(y,{variant:"primary",onClick:u,disabled:!l,children:"Add User"}),e.jsx(y,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})]})})]})},Ms=[{id:"1",name:"Demo Admin",role:"stock-manager",password:"admin"},{id:"2",name:"Demo Staff",role:"sales-staff",password:"staff"}],Os=()=>{const{login:s}=_(),t=pe(),[r,a]=o.useState(""),[n,l]=o.useState(""),[x,h]=o.useState(""),g=u=>{if(u.preventDefault(),h(""),!r||!n){h("Username and password are required");return}const c=Ms.find(f=>(f.name.toLowerCase()===r.toLowerCase()||r.toLowerCase()===f.role)&&f.password===n);c?(s({id:c.id,name:c.name,role:c.role}),t("/")):h("Invalid credentials")};return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs(k,{className:"w-full max-w-md",children:[e.jsxs(U,{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-indigo-600 text-white w-16 h-16 flex items-center justify-center rounded-full mb-4",children:e.jsx(Y,{size:32})}),e.jsx(T,{className:"text-2xl font-bold text-slate-900",children:"StockTrack"}),e.jsx(vs,{children:"Inventory Management for Retail Stores"})]}),e.jsxs(S,{children:[x&&e.jsx("div",{className:"bg-red-50 text-red-800 p-3 rounded-md mb-4 text-sm",children:x}),e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),e.jsx(F,{id:"username",value:r,onChange:u=>a(u.target.value),placeholder:"Enter your username",leftIcon:e.jsx(Be,{className:"h-5 w-5 text-slate-400"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),e.jsx(F,{id:"password",type:"password",value:n,onChange:u=>l(u.target.value),placeholder:"Enter your password",leftIcon:e.jsx(rs,{className:"h-5 w-5 text-slate-400"})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(y,{className:"w-full",type:"submit",children:"Log In"})})]})}),e.jsxs("div",{className:"mt-6 border-t border-slate-200 pt-4",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"For demo purposes, use:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>{a("Demo Admin"),l("admin")},className:"p-2 text-left text-sm border border-slate-200 rounded hover:bg-slate-50",children:[e.jsx("div",{className:"font-medium",children:"Admin"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Password: admin"})]}),e.jsxs("button",{onClick:()=>{a("Demo Staff"),l("staff")},className:"p-2 text-left text-sm border border-slate-200 rounded hover:bg-slate-50",children:[e.jsx("div",{className:"font-medium",children:"Staff"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Password: staff"})]})]})]})]})]})})},se=({element:s,adminOnly:t=!1})=>{const{isAuthenticated:r,isStockManager:a}=_();return r?t&&!a?e.jsx(te,{to:"/"}):e.jsx(e.Fragment,{children:s}):e.jsx(te,{to:"/login"})};function Es(){return e.jsx(Ae,{children:e.jsx(Ve,{children:e.jsx(Ye,{children:e.jsxs(De,{children:[e.jsx(R,{path:"/login",element:e.jsx(Os,{})}),e.jsxs(R,{path:"/",element:e.jsx(se,{element:e.jsx(ys,{})}),children:[e.jsx(R,{index:!0,element:e.jsx(Ns,{})}),e.jsx(R,{path:"inventory",element:e.jsx(Ss,{})}),e.jsx(R,{path:"boxes",element:e.jsx(Cs,{})}),e.jsx(R,{path:"upload",element:e.jsx(se,{element:e.jsx(Ps,{}),adminOnly:!0})}),e.jsx(R,{path:"users",element:e.jsx(se,{element:e.jsx(Is,{}),adminOnly:!0})})]}),e.jsx(R,{path:"*",element:e.jsx(te,{to:"/"})})]})})})})}be(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Es,{})}));
